# Migration `20200224035644-initialize`

This migration has been generated by leedavidcs at 2/24/2020, 3:56:44 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."User" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "email" text  NOT NULL DEFAULT '',
    "emailVerified" boolean  NOT NULL DEFAULT false,
    "id" text  NOT NULL ,
    "password" text  NOT NULL DEFAULT '',
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "username" text  NOT NULL DEFAULT '',
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."StockPortfolioHeader" (
    "dataKey" text  NOT NULL DEFAULT '',
    "frozen" boolean  NOT NULL DEFAULT false,
    "id" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "resizable" boolean  NOT NULL DEFAULT true,
    "stockPortfolio" text   ,
    "width" integer  NOT NULL DEFAULT 100,
    PRIMARY KEY ("id")
) 

CREATE TABLE "public"."StockPortfolio" (
    "createdAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "id" text  NOT NULL ,
    "name" text  NOT NULL DEFAULT '',
    "tickers" text []  ,
    "updatedAt" timestamp(3)  NOT NULL DEFAULT '1970-01-01 00:00:00',
    "user" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "User.username" ON "public"."User"("username")

CREATE  INDEX "StockPortfolio.user_name" ON "public"."StockPortfolio"("user","name")

ALTER TABLE "public"."StockPortfolioHeader" ADD FOREIGN KEY ("stockPortfolio")REFERENCES "public"."StockPortfolio"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."StockPortfolio" ADD FOREIGN KEY ("user")REFERENCES "public"."User"("id") ON DELETE RESTRICT  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200224035644-initialize
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,42 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id            String @id @default(uuid())
+  email         String @unique
+  emailVerified Boolean @default(false)
+  password      String
+  username      String @unique
+  createdAt     DateTime @default(now())
+  updatedAt     DateTime @updatedAt
+}
+
+model StockPortfolioHeader {
+  id        String @id @default(uuid())
+  name      String
+  dataKey   String
+  width     Int @default(100)
+  frozen    Boolean @default(false)
+  resizable Boolean @default(true)
+}
+
+model StockPortfolio {
+  id        String @id @default(uuid())
+  user      User
+  name      String
+  headers   StockPortfolioHeader[]
+  tickers   String[]
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+
+  @@index([user, name])
+}
```


